public class Startup
{
    public void ConfigureServices(IServiceCollection services)
    {
        services.AddDbContext<EventStoreContext>(options =>
            options.UseSqlServer("YourConnectionString"));

        services.AddScoped<EventStore>();
        services.AddScoped<CommandHandler>();
        services.AddScoped<QueryHandler>();
    }
    .
    .
    .
}
